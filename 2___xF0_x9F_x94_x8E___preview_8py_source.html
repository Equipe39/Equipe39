<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PolyBM: pages/2_ðŸ”Ž_Preview.py Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="LGS.jpg"/></td>
  <td id="projectalign">
   <div id="projectname">PolyBM<span id="projectnumber">&#160;0.1</span>
   </div>
   <div id="projectbrief">The PolyBM Data Analysis Tool is an AI tool that helps users profile, format, and anonymize data from CSV, JSON, and XML files. The tool offers various functionalities such as creating charts, generating data quality reports, and anonymizing sensitive data.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('2___xF0_x9F_x94_x8E___preview_8py_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">2_ðŸ”Ž_Preview.py</div></div>
</div><!--header-->
<div class="contents">
<a href="2___xF0_x9F_x94_x8E___preview_8py.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno"><a class="line" href="namespace2___xF0_x9F_x94_x8E___preview.html">    1</a></span><span class="comment"># Rename columns and return form. This is a hack to allow users to rename columns. We don&#39;t want to use FormBuilder. column_to_change because it&#39;s called from a form builder</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span><span class="comment"># This is a hack to allow users to rename columns. We don&#39;t want to use FormBuilder. column_to_change because it&#39;s the only method that can be called from a form</span></div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="keyword">import</span> streamlit <span class="keyword">as</span> st</div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span><span class="keyword">from</span> st_aggrid <span class="keyword">import</span> AgGrid, GridOptionsBuilder</div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span> </div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span><span class="comment"># Preview page layout</span></div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno"><a class="line" href="namespace2___xF0_x9F_x94_x8E___preview.html#ae05d2bff0bd11e000d6eb7c700a6532e">    7</a></span>st.set_page_config(layout=<span class="stringliteral">&quot;wide&quot;</span>)</div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span>st.title(<span class="stringliteral">&quot;Data preview&quot;</span>)</div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span> </div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span><span class="keywordflow">if</span> <span class="stringliteral">&#39;df_preview&#39;</span> <span class="keywordflow">not</span> <span class="keywordflow">in</span> st.session_state:</div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span>    st.warning(<span class="stringliteral">&#39;Please go back to the Upload page and select the data.&#39;</span>)</div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno"><a class="line" href="namespace2___xF0_x9F_x94_x8E___preview.html#abe188669668b9959c884deca8d4dcfb1">   12</a></span><span class="keywordflow">else</span>:</div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span> </div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span>    <span class="comment"># Column renaming</span></div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno"><a class="line" href="namespace2___xF0_x9F_x94_x8E___preview.html#a4d29bc1cf8413bfcd640029ad0a82a12">   15</a></span>    col_a, col_b = st.columns(2)</div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span>    <span class="keyword">with</span> col_a:</div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno"><a class="line" href="namespace2___xF0_x9F_x94_x8E___preview.html#ab5e66ac1279daaf95bd302bd443bec5b">   17</a></span>        data = st.session_state[<span class="stringliteral">&#39;df_preview&#39;</span>]</div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno"><a class="line" href="namespace2___xF0_x9F_x94_x8E___preview.html#a60f4394053577199375da3e30b17e344">   18</a></span>        <span class="keyword">with</span> st.form(key=<span class="stringliteral">&quot;form_rename&quot;</span>):</div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno"><a class="line" href="namespace2___xF0_x9F_x94_x8E___preview.html#a4d64b9e0f05735dadbba1e03902a72d4">   19</a></span>            col_to_change = st.selectbox(<span class="stringliteral">&quot;Column to change&quot;</span>, data.columns)</div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno"><a class="line" href="namespace2___xF0_x9F_x94_x8E___preview.html#addce339bf3701c12b66804a18452a19c">   20</a></span>            new_col_name = st.text_input(<span class="stringliteral">&quot;New name&quot;</span>, value=<span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno"><a class="line" href="namespace2___xF0_x9F_x94_x8E___preview.html#a17336d82e03319b058c7d1e87af84ac4">   21</a></span>            submit_button = st.form_submit_button(label=<span class="stringliteral">&#39;Save&#39;</span>)</div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span> </div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span>    <span class="keywordflow">if</span> submit_button:</div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno"><a class="line" href="namespace2___xF0_x9F_x94_x8E___preview.html#aeff81e883d01248da5297a2927f9f188">   24</a></span>        st.session_state[<span class="stringliteral">&#39;df_preview&#39;</span>] = st.session_state[<span class="stringliteral">&#39;df_preview&#39;</span>].rename(columns={col_to_change: new_col_name})</div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span>        st.experimental_rerun()</div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span> </div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span>    <span class="comment"># Column to upper/lower case</span></div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span>    <span class="keyword">with</span> col_b:</div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span>        <span class="keyword">with</span> st.form(key=<span class="stringliteral">&quot;form_case&quot;</span>):</div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno"><a class="line" href="namespace2___xF0_x9F_x94_x8E___preview.html#ac33479e353debd6f1efb585587e4afd2">   30</a></span>            col_to_case = st.selectbox(<span class="stringliteral">&quot;Column to change&quot;</span>, data.columns)</div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno"><a class="line" href="namespace2___xF0_x9F_x94_x8E___preview.html#ad3761519e1d2339713aa37532971cf03">   31</a></span>            case = st.radio(</div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span>                <span class="stringliteral">&quot;Upper/lower case&quot;</span>,</div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span>                (<span class="stringliteral">&#39;Uppercase&#39;</span>, <span class="stringliteral">&#39;Lowercase&#39;</span>), horizontal=<span class="keyword">True</span>)</div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno"><a class="line" href="namespace2___xF0_x9F_x94_x8E___preview.html#a6c5a07df2eed06fa91cd03e72744cd9c">   34</a></span>            submit_case = st.form_submit_button(label=<span class="stringliteral">&#39;Save&#39;</span>)</div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span> </div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span>    <span class="keywordflow">if</span> submit_case:</div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span>        <span class="keywordflow">if</span> case == <span class="stringliteral">&#39;Uppercase&#39;</span>:</div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno"><a class="line" href="namespace2___xF0_x9F_x94_x8E___preview.html#acbe576583e526794ecd0bc6896cfab45">   38</a></span>            <span class="keywordflow">try</span>:</div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span>                st.session_state[<span class="stringliteral">&#39;df_preview&#39;</span>][col_to_case] = st.session_state[<span class="stringliteral">&#39;df_preview&#39;</span>][col_to_case].str.upper()</div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span>                st.experimental_rerun()</div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span>            <span class="keywordflow">except</span> AttributeError:</div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span>                st.error(<span class="stringliteral">&#39;Cannot capitalize this column : invalid data type&#39;</span>)</div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span>            <span class="keywordflow">try</span>:</div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span>                st.session_state[<span class="stringliteral">&#39;df_preview&#39;</span>][col_to_case] = st.session_state[<span class="stringliteral">&#39;df_preview&#39;</span>][col_to_case].str.lower()</div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span>                st.experimental_rerun()</div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span>            <span class="keywordflow">except</span> AttributeError:</div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span>                st.error(<span class="stringliteral">&#39;Cannot lowercase this column : invalid data type&#39;</span>)</div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span> </div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span>    <span class="comment"># Create dataframe grid</span></div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno"><a class="line" href="namespace2___xF0_x9F_x94_x8E___preview.html#a0c3e19a4c3e8dc259e0844d8a89bfe94">   51</a></span>    gb = GridOptionsBuilder.from_dataframe(data)</div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno"><a class="line" href="namespace2___xF0_x9F_x94_x8E___preview.html#afb796af86d3df582597e6408b5da90a9">   52</a></span>    gb.configure_pagination(paginationAutoPageSize=<span class="keyword">True</span>)  <span class="comment"># Add pagination</span></div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span>    gb.configure_side_bar()  <span class="comment"># Add a sidebar</span></div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno"><a class="line" href="namespace2___xF0_x9F_x94_x8E___preview.html#ac9308ad9d74884bc02bc467e3b38ad5a">   54</a></span>    gb.configure_selection(<span class="stringliteral">&#39;multiple&#39;</span>, use_checkbox=<span class="keyword">True</span>,</div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno"><a class="line" href="namespace2___xF0_x9F_x94_x8E___preview.html#a8c8a3359d193021e833128b9f4be22d1">   55</a></span>                           groupSelectsChildren=<span class="stringliteral">&quot;Group checkbox select children&quot;</span>)  <span class="comment"># Enable multi-row selection</span></div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno"><a class="line" href="namespace2___xF0_x9F_x94_x8E___preview.html#a352f22b9544a7a4517843e2a1be63e3f">   56</a></span>    gridOptions = gb.build()</div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span> </div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno"><a class="line" href="namespace2___xF0_x9F_x94_x8E___preview.html#a6e4b8bec387769d02c1120cbc196997d">   58</a></span>    grid_response = AgGrid(</div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span>        data,</div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span>        gridOptions=gridOptions,</div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span>        data_return_mode=<span class="stringliteral">&#39;AS_INPUT&#39;</span>,</div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span>        update_mode=<span class="stringliteral">&#39;MODEL_CHANGED&#39;</span>,</div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span>        fit_columns_on_grid_load=<span class="keyword">False</span>,</div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span>        theme=<span class="stringliteral">&#39;alpine&#39;</span>,  <span class="comment"># Add theme color to the table</span></div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span>        enable_enterprise_modules=<span class="keyword">True</span>,</div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span>        height=600,</div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span>        width=<span class="stringliteral">&#39;100%&#39;</span>,</div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span>        reload_data=<span class="keyword">True</span></div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span>    )</div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span> </div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span>    <span class="comment"># Display Dataframe general info</span></div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno"><a class="line" href="namespace2___xF0_x9F_x94_x8E___preview.html#a87a1a0b10445d035f8af2ced9e004f38">   72</a></span>    col1, col2, col3, col4 = st.columns(4)</div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span>    <span class="keyword">with</span> col1:</div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span>        st.write(<span class="stringliteral">&quot;Filename: &quot;</span> + st.session_state[<span class="stringliteral">&#39;df.filename&#39;</span>])</div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span>    <span class="keyword">with</span> col2:</div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span>        st.write(<span class="stringliteral">&quot;Rows: &quot;</span> + str(data.shape[0]))</div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span>    <span class="keyword">with</span> col3:</div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span>        st.write(<span class="stringliteral">&quot;Columns: &quot;</span> + str(data.shape[1]))</div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span>    <span class="keyword">with</span> col4:</div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span>        st.write(<span class="stringliteral">&quot;Size: &quot;</span> + str(round(data.memory_usage(deep=<span class="keyword">True</span>).sum() / 1024)) + <span class="stringliteral">&quot; KB&quot;</span>)</div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_208d2690607c4e3d3fabfa1d18673d36.html">pages</a></li><li class="navelem"><a class="el" href="2___xF0_x9F_x94_x8E___preview_8py.html">2_ðŸ”Ž_Preview.py</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6 </li>
  </ul>
</div>
</body>
</html>

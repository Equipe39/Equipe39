<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PolyBM: Identify a value based on the available providers</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="LGS.jpg"/></td>
  <td id="projectalign">
   <div id="projectname">PolyBM<span id="projectnumber">&#160;0.1</span>
   </div>
   <div id="projectbrief">The PolyBM Data Analysis Tool is an AI tool that helps users profile, format, and anonymize data from CSV, JSON, and XML files. The tool offers various functionalities such as creating charts, generating data quality reports, and anonymizing sensitive data.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Identify a value based on the available providers </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>In the following example, we will try to identify the type for the value <code>John</code>. We are looping through all the available identifiers, as returned by <code>IdentifierFactory.availableIdentifiers()</code> and we invoke the <code>.isOfThisType(value)</code> for each identifier. On a successful match we print the type name.</p>
<div class="fragment"><div class="line"><span class="keyword">import</span> com.ibm.research.drl.dpt.providers.ProviderType;</div>
<div class="line"><span class="keyword">import</span> com.ibm.research.drl.dpt.providers.identifiers.IdentifierFactory;</div>
<div class="line"><span class="keyword">import</span> com.ibm.research.drl.dpt.providers.identifiers.Identifier;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">public</span> <span class="keywordtype">void</span> testIdentifyValue() {</div>
<div class="line"> </div>
<div class="line">    <span class="comment">//retrieve a list of available identifiers</span></div>
<div class="line">    Collection&lt;Identifier&gt; identifiers = IdentifierFactory.availableIdentifiers();</div>
<div class="line"> </div>
<div class="line">    String value = <span class="stringliteral">&quot;John&quot;</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">//call the identifiers and see if we have a match for a value</span></div>
<div class="line">    <span class="keywordflow">for</span>(Identifier identifier: identifiers) {</div>
<div class="line">        <span class="keywordtype">boolean</span> match = identifier.isOfThisType(value);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (match == <span class="keyword">true</span>) {</div>
<div class="line">            System.out.println(<span class="stringliteral">&quot;identifier matched: &quot;</span> + identifier.getType().name());</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md66"></a>
Identify the types of attributes for various input formats</h1>
<p>The basic principle is to create a <code>FormatProcessor</code> for the given format and then call</p>
<div class="fragment"><div class="line">Map&lt;String, Map&lt;String, List&lt;IdentifiedType&gt;&gt;&gt; </div>
<div class="line">    identifyTypesStream(InputStream input, DataTypeFormat inputFormatType, </div>
<div class="line">            DatasetOptions datasetOptions, Collection&lt;Identifier&gt; identifiers, <span class="keywordtype">int</span> firstN);</div>
</div><!-- fragment --><ul>
<li><code>input</code> is an InputStream to the data</li>
<li><code>inputFormatType</code> is an enumeration of the formats that support type identification. The list of formats are CSV, JSON, DICOM, XLS, XLSX, XML, PARQUET, VCF, JDBC.</li>
<li><code>datasetOptions</code> contains dataset-specific options. It should be an instance of CSVDatasetOptions in the case of CSV else it should be <code>null</code></li>
<li><code>identifiers</code> is a collection of Identifier objects to run on top of the data</li>
<li>if <code>firstN</code> has a value greater than zero then only this amount of records will be processed only</li>
</ul>
<p>A <code>FormatProcessor</code> object can be instantiated from the FormatProcessorFactory's <code>getProcessor(DataTypeFormat datatypeFormat)</code></p>
<h2><a class="anchor" id="autotoc_md67"></a>
CSV</h2>
<div class="fragment"><div class="line"><span class="keyword">public</span> <span class="keywordtype">void</span> testDatasetIdentification(InputStream is, <span class="keywordtype">boolean</span> hasHeader) <span class="keywordflow">throws</span> Exception {</div>
<div class="line">    DatasetOptions datasetOptions = <span class="keyword">new</span> CSVDatasetOptions(hasHeader, <span class="charliteral">&#39;,&#39;</span>, <span class="charliteral">&#39;&quot;&#39;</span>, <span class="keyword">false</span>);</div>
<div class="line">    </div>
<div class="line">    FormatProcessor csvProcessor = FormatProcessorFactory.getProcessor(DataTypeFormat.CSV);</div>
<div class="line">    </div>
<div class="line">    Collection&lt;Identifier&gt; defaultIdentifiers = IdentifierFactory.defaultIdentifiers();</div>
<div class="line">    </div>
<div class="line">    Map&lt;String, Map&lt;String, List&lt;IdentifiedType&gt;&gt;&gt; results = </div>
<div class="line">                    csvProcessor. identifyTypesStream(is, DataTypeFormat.CSV, datasetOptions, </div>
<div class="line">                    defaultIdentifiers, -1);</div>
<div class="line">            </div>
<div class="line">    <span class="comment">// print results here</span></div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md68"></a>
JSON, DICOM, XLS, XLSX, XML, PARQUET, VCF</h2>
<p>Similar to CSV case but changing the DataTypeFormat to the factory call as well as the dataset options should be set to <code>null</code>. The <code>InputStream</code> should be a regular input stream to the contents of the data (like a FileInputStream).</p>
<h2><a class="anchor" id="autotoc_md69"></a>
JDBC</h2>
<div class="fragment"><div class="line"><span class="keyword">private</span> <span class="keyword">static</span> Connection getConnection() throws ClassNotFoundException, SQLException {</div>
<div class="line">        String DBUrl      = <span class="stringliteral">&quot;jdbc:postgresql://localhost/test&quot;</span>;</div>
<div class="line">        String DBUsername = <span class="stringliteral">&quot;postgres&quot;</span>;</div>
<div class="line">        String DBPassword = <span class="stringliteral">&quot;&quot;</span>; <span class="comment">// Need password</span></div>
<div class="line"> </div>
<div class="line">        <span class="comment">//Class.forName(DBDriver);</span></div>
<div class="line">        <span class="keywordflow">return</span> DriverManager.getConnection(DBUrl, DBUsername, DBPassword);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">public</span> <span class="keywordtype">void</span> testDatabase() {</div>
<div class="line">    String schemaName = <span class="stringliteral">&quot;s1&quot;</span>;</div>
<div class="line">    String tableName = <span class="stringliteral">&quot;people&quot;</span>;</div>
<div class="line">    </div>
<div class="line">    InputStream jdbcStream  = <span class="keyword">new</span> ResultSetInputStream(getConnection(), schemaName, tableName);</div>
<div class="line">    </div>
<div class="line">    FormatProcessor formatProcessor = FormatProcessorFactory.getProcessor(DataTypeFormat.JDBC);</div>
<div class="line">    </div>
<div class="line">    Map&lt;String, Map&lt;String, List&lt;IdentifiedType&gt;&gt;&gt; results = </div>
<div class="line">        formatProcessor. identifyTypesStream(jdbcStream, DataTypeFormat.JDBC, <span class="keyword">null</span>,</div>
<div class="line">        defaultIdentifiers, -1);</div>
<div class="line">        </div>
<div class="line">    <span class="comment">//print results here</span></div>
<div class="line">}</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md70"></a>
Register a user-defined regex-based identifier</h1>
<p>The toolkit allows the registration of custom regex-based identifiers. In the following example we will create a regex-based identifier that will match the regex <code>^foobar$</code> and will report the matches as being of type <code>FOOBAR</code></p>
<p>We first create a list that contains the regular expressions</p>
<div class="fragment"><div class="line">Collection&lt;String&gt; patterns = Arrays.asList(<span class="keyword">new</span> String[] {<span class="stringliteral">&quot;^foobar$&quot;</span>});</div>
</div><!-- fragment --><p> We create a new PluggableRegexIdentifier</p>
<p>The first argument is the name of the provider type (can be anything) The second argument is a list of possible column names The third argument is the list of regex patterns created in the first step The last argument is the value class, possible values are TEXT, NUMERIC, DATE, LOCATION, UNKNOWN (the value class is used for relationship identification and compound masking)</p>
<div class="fragment"><div class="line">Identifier pluggableRegexIdentifier = <span class="keyword">new</span> PluggableRegexIdentifier(<span class="stringliteral">&quot;FOOBAR&quot;</span>, Arrays.asList(<span class="keyword">new</span> String[] {<span class="stringliteral">&quot;foo&quot;</span>}), patterns, ValueClass.TEXT);</div>
</div><!-- fragment --><p> We register the identifier through the IdentifierFactory </p><div class="fragment"><div class="line">IdentifierFactory.registerIdentifier(pluggableRegexIdentifier);</div>
</div><!-- fragment --><p> After the registration the identifier is available through <code>IdentifierFactory.availableIdentifiers()</code> or can be invoked directly.</p>
<h1><a class="anchor" id="autotoc_md71"></a>
Register a user-defined dictionary-based identifier</h1>
<p>The toolkit allows the registration of custom dictionary-based identifiers. In the following example we will create a regex-based identifier that will match the terms <code>term1</code> and <code>term2</code> and will report the matches as being of type <code>FOOBAR</code></p>
<div class="fragment"><div class="line"><span class="comment">//we first create a list that contains the terms for lookup</span></div>
<div class="line">Collection&lt;String&gt; terms = Arrays.asList(<span class="keyword">new</span> String[] {<span class="stringliteral">&quot;term1&quot;</span>, <span class="stringliteral">&quot;term2&quot;</span>});</div>
</div><!-- fragment --><p> We create a new PluggableLookupIdentifier. The first argument is the name of the provider type (can be anything) The second argument is a list of possible column names The third argument is the list of terms created in the first step The fourth argument is a boolean flag that indicates if we want to ignore case or not The last argument is the value class, possible values are TEXT, NUMERIC, DATE, LOCATION, UNKNOWN (the value class is used for relationship identification and compound masking) </p><div class="fragment"><div class="line">Identifier pluggableLookupIdentifier = <span class="keyword">new</span> PluggableLookupIdentifier(<span class="stringliteral">&quot;FOOBAR&quot;</span>, Arrays.asList(<span class="keyword">new</span> String[] {<span class="stringliteral">&quot;foo&quot;</span>}), terms, <span class="keyword">true</span>, ValueClass.TEXT);</div>
</div><!-- fragment --><p>We register the identifier through the IdentifierFactory </p><div class="fragment"><div class="line">IdentifierFactory.registerIdentifier(pluggableLookupIdentifier);</div>
</div><!-- fragment --><p> After the registration the identifier is available through <code>IdentifierFactory.availableIdentifiers()</code> or can be invoked directly. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>

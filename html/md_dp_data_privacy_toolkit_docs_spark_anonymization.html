<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PolyBM: Invoking the anonymization Spark executor</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="LGS.jpg"/></td>
  <td id="projectalign">
   <div id="projectname">PolyBM<span id="projectnumber">&#160;0.1</span>
   </div>
   <div id="projectbrief">The PolyBM Data Analysis Tool is an AI tool that helps users profile, format, and anonymize data from CSV, JSON, and XML files. The tool offers various functionalities such as creating charts, generating data quality reports, and anonymizing sensitive data.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Invoking the anonymization Spark executor </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The anonymization executor requires the input and output paths as well as the configuration file. It can be invoked as:</p>
<div class="fragment"><div class="line">spark-submit \</div>
<div class="line">    --class com.ibm.research.drl.dpt.spark.anonymization.AnonymizationExecutor \</div>
<div class="line">    dpt-spark-$VERSION-jar-with-dependencies.jar \</div>
<div class="line">    -c anon_conf.json -a OLA -i test.csv -o anonymized_output -F TEXTFILE</div>
</div><!-- fragment --><p>where <code>anon_conf.json</code> is the configuration file, <code>test.csv</code> is the input file and <code>anonymized_output</code> is the output directory.</p>
<p>The full list of parameters to the executor are:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Parameter   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">-i,&ndash;input &lt;arg&gt;   </td><td class="markdownTableBodyNone">Path to the file to be masked (required)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">-o,&ndash;output &lt;arg&gt;   </td><td class="markdownTableBodyNone">Output directory (required)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">-c,&ndash;conf &lt;arg&gt;   </td><td class="markdownTableBodyNone">Path to the configuration file (required)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">-a,&ndash;algorithm &lt;arg&gt;   </td><td class="markdownTableBodyNone">Algorithm name, currently the available option is OLA    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">&ndash;remoteConf   </td><td class="markdownTableBodyNone">If set, then the configuration file will be read from HDFS (optional)   </td></tr>
</table>
<p>The <code>--remoteConf</code> controls if the configuration file should be read from HDFS instead of the local filesystem.</p>
<h1><a class="anchor" id="autotoc_md154"></a>
Invoking the Spark RDD API</h1>
<p>Users can invoke the Spark API as:</p>
<div class="fragment"><div class="line"><span class="keyword">import</span> com.ibm.research.drl.dpt.spark.anonymization.ola.OLASpark;</div>
<div class="line"><span class="keyword">import</span> org.apache.spark.rdd.RDD;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">public</span> RDD&lt;String&gt; anonymizeRDD(RDD&lt;String&gt; input, InputStream configurationFileStream) {</div>
<div class="line">    <span class="keywordflow">return</span> OLASpark.run(configurationFileStream, input);</div>
<div class="line">}</div>
</div><!-- fragment --><p>where <code>configurationFileStream</code> is the input stream to the configuration file and <code>input</code> is the RDD containing the data to mask.</p>
<h1><a class="anchor" id="autotoc_md155"></a>
Writing the configuration file</h1>
<p>The anonymization configuration file is a JSON file.</p>
<p>The structure of the file is as follows:</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  &quot;hierarchies&quot; : {</div>
<div class="line">    &quot;gender&quot; : [</div>
<div class="line">      [&quot;M&quot;, &quot;Person&quot;],</div>
<div class="line">      [&quot;F&quot;, &quot;Person&quot;]</div>
<div class="line">    ],</div>
<div class="line"> </div>
<div class="line">    &quot;date&quot; : &quot;DATE&quot;,</div>
<div class="line"> </div>
<div class="line">    &quot;age&quot; : {</div>
<div class="line">        &quot;className&quot;: &quot;com.ibm.research.hierarchies.custom.age&quot;,</div>
<div class="line">        &quot;options&quot;: {}</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">  },</div>
<div class="line"> </div>
<div class="line">  &quot;columnInformation&quot;: [</div>
<div class="line">    {&quot;type&quot;: &quot;QUASI&quot;, &quot;isCategorical&quot;: true, &quot;hierarchy&quot;: &quot;date&quot;, &quot;weight&quot;: 1.0, &quot;maximumLevel&quot;: -1},</div>
<div class="line">    {&quot;type&quot;: &quot;QUASI&quot;, &quot;isCategorical&quot;: true, &quot;hierarchy&quot;: &quot;gender&quot;, &quot;isForLinking&quot;: true},</div>
<div class="line">    {&quot;type&quot;: &quot;QUASI&quot;, &quot;isCategorical&quot;: true, &quot;hierarchy&quot;: &quot;age&quot;, &quot;isForLinking&quot;: true}</div>
<div class="line">  ],</div>
<div class="line"> </div>
<div class="line">  &quot;privacyConstraints&quot;: [</div>
<div class="line">    {&quot;name&quot;: &quot;k&quot;, &quot;k&quot;: 2}</div>
<div class="line">  ],</div>
<div class="line"> </div>
<div class="line">  &quot;options&quot; : {</div>
<div class="line">    &quot;suppression&quot;: 20.0</div>
<div class="line">  },</div>
<div class="line"> </div>
<div class="line">  &quot;delimiter&quot;: &quot;,&quot;,</div>
<div class="line">  &quot;hasHeader&quot;: false,</div>
<div class="line">  &quot;quoteChar&quot;: &quot;\&quot;&quot;,</div>
<div class="line">  &quot;trimFields&quot;: false</div>
<div class="line"> </div>
<div class="line">}</div>
</div><!-- fragment --><ul>
<li>The <code>delimiter</code> specifies the delimiter character for the input file</li>
<li>The <code>hasHeader</code> is a boolean flag that instructs if the first line of the input file must be treated as a header or not</li>
<li>The <code>quoteChar</code> specifies the quote character for the input file</li>
<li>The <code>options</code> section is optional and contains algorithm-specific options. It can contain a <code>suppression</code> key which specifies the maximum suppression rate allowed in the anonymization process. If no suppression rate is specified, its default value is 0.</li>
</ul>
<h2><a class="anchor" id="autotoc_md156"></a>
The &lt;tt&gt;columnInformation&lt;/tt&gt; section</h2>
<p>The <code>columnInformation</code> section contains information for each column. It is an array and each element of the array is an object. Each object needs to have the key <code>type</code> that declares if the column is a quasi-identifier (value is <code>QUASI</code>), sensitive (value is <code>SENSITIVE</code>) or if we don't handle this column (value is <code>NORMAL</code>).</p>
<p>The columns with type <code>QUASI</code> will be anonymized by the anonymization algorithm. For the <code>QUASI</code> entries, we need to specify the hierarchy to which it belongs. The hierarchy value must match one of the keys in the <code>hierarchies</code> section. See the next section for details on how to specify hierarchies. We also need to specify if the attribute is categorical or not throught the <code>isCategorical</code> boolean field.</p>
<p>For each <code>QUASI</code> column, we can optionally specify the <code>weight</code> and <code>maximumLevel</code>. The <code>weight</code> is used in the calculation of the information loss metric and must be a positive number. Its default value is 1. The <code>maximumLevel</code> specifies the maximum level in the hierarchy to which we should anonymize. The anonymization algorithm will not anonymize that column above this level. By default, the <code>maximumLevel</code> is set to -1, which means that the algorithm is allowed to anonymize that column up to its maximum hierarchy level.</p>
<p>For the columns of type <code>NORMAL</code> or <code>SENSITIVE</code> no other fields are required.</p>
<p>Each column that needs to be part of the risk calculation needs to have a boolean field with the name <code>isForLinking</code> in its column information attributes and the value set to true.</p>
<h2><a class="anchor" id="autotoc_md157"></a>
The &lt;tt&gt;hierarchies&lt;/tt&gt; section</h2>
<p>Each key in the <code>hierarchies</code> section specifies a hierarchy.</p>
<p>The anonymization configuration file is a JSON file.</p>
<p>The structure of the file is as follows:</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  &quot;hierarchies&quot; : {</div>
<div class="line">    &quot;gender&quot; : [</div>
<div class="line">      [&quot;M&quot;, &quot;Person&quot;],</div>
<div class="line">      [&quot;F&quot;, &quot;Person&quot;]</div>
<div class="line">    ],</div>
<div class="line"> </div>
<div class="line">    &quot;date&quot; : &quot;DATE&quot;,</div>
<div class="line"> </div>
<div class="line">    &quot;age&quot; : {</div>
<div class="line">        &quot;className&quot;: &quot;com.ibm.research.hierarchies.custom.age&quot;,</div>
<div class="line">        &quot;options&quot;: {}</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">  },</div>
<div class="line"> </div>
<div class="line">  &quot;columnInformation&quot;: [</div>
<div class="line">    {&quot;type&quot;: &quot;QUASI&quot;, &quot;isCategorical&quot;: true, &quot;hierarchy&quot;: &quot;date&quot;, &quot;weight&quot;: 1.0, &quot;maximumLevel&quot;: -1},</div>
<div class="line">    {&quot;type&quot;: &quot;QUASI&quot;, &quot;isCategorical&quot;: true, &quot;hierarchy&quot;: &quot;gender&quot;, &quot;isForLinking&quot;: true},</div>
<div class="line">    {&quot;type&quot;: &quot;QUASI&quot;, &quot;isCategorical&quot;: true, &quot;hierarchy&quot;: &quot;age&quot;, &quot;isForLinking&quot;: true}</div>
<div class="line">  ],</div>
<div class="line"> </div>
<div class="line">  &quot;privacyConstraints&quot;: [</div>
<div class="line">    {&quot;name&quot;: &quot;k&quot;, &quot;k&quot;: 2}</div>
<div class="line">  ],</div>
<div class="line"> </div>
<div class="line">  &quot;options&quot; : {</div>
<div class="line">    &quot;suppression&quot;: 20.0</div>
<div class="line">  },</div>
<div class="line"> </div>
<div class="line">  &quot;informationLossMetric&quot;: &quot;CP&quot;,</div>
<div class="line"> </div>
<div class="line">  &quot;delimiter&quot;: &quot;,&quot;,</div>
<div class="line">  &quot;hasHeader&quot;: false,</div>
<div class="line">  &quot;quoteChar&quot;: &quot;\&quot;&quot;,</div>
<div class="line"> </div>
<div class="line">  &quot;estimateUniqueness&quot;: true,</div>
<div class="line">  </div>
<div class="line">  &quot;riskMetric&quot;: &quot;BINOM&quot;,</div>
<div class="line">  &quot;riskMetricOptions&quot;: {</div>
<div class="line">    &quot;N&quot;: 123123123,</div>
<div class="line">    &quot;useGlobalP&quot;: false</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><ul>
<li>The <code>delimiter</code> specifies the delimiter character for the input file</li>
<li>The <code>hasHeader</code> is a boolean flag that instructs if the first line of the input file must be treated as a header or not</li>
<li>The <code>quoteChar</code> specifies the quote character for the input file</li>
<li>The <code>informationLossMetric</code> specifies the short name of the metric to be used for reporting the information loss after the anonymization process. Its default value is <code>CP</code>. The table below contains the possible values for the information loss metric with their description</li>
</ul>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Short name   </th><th class="markdownTableHeadNone">Description   </th><th class="markdownTableHeadNone">Lower bound   </th><th class="markdownTableHeadNone">Upper bound    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">CP   </td><td class="markdownTableBodyNone">Categorical Precision   </td><td class="markdownTableBodyNone">0   </td><td class="markdownTableBodyNone">1    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">AECS   </td><td class="markdownTableBodyNone">Average Equivalence Class Size   </td><td class="markdownTableBodyNone">Depends on the anonymized dataset   </td><td class="markdownTableBodyNone">Depends on the anonymized dataset    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">DM   </td><td class="markdownTableBodyNone">Discernibility   </td><td class="markdownTableBodyNone">Depends on the original dataset   </td><td class="markdownTableBodyNone">Depends on the original dataset    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">DMSTAR   </td><td class="markdownTableBodyNone">Discernibility (monotonic version)   </td><td class="markdownTableBodyNone">Depends on the original dataset   </td><td class="markdownTableBodyNone">Depends on the original dataset    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">GLM   </td><td class="markdownTableBodyNone">Generalized Loss Metric   </td><td class="markdownTableBodyNone">0   </td><td class="markdownTableBodyNone">Depends on the original dataset    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">NUE   </td><td class="markdownTableBodyNone">Non-Uniform Entropy   </td><td class="markdownTableBodyNone">0   </td><td class="markdownTableBodyNone">Depends on the original dataset    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">NP   </td><td class="markdownTableBodyNone">Numerical precision (only for numerical)   </td><td class="markdownTableBodyNone">0   </td><td class="markdownTableBodyNone">1   </td></tr>
</table>
<ul>
<li>The <code>options</code> section is optional and contains algorithm-specific options. It can contain a <code>suppression</code> key which specifies the maximum suppression rate allowed in the anonymization process. If no suppression rate is specified, its default value is 0.</li>
<li>The <code>riskMetric</code> specifies the short name of the metric to be used for reporting the risk after the anonymization process. It has no default value and it will cause an error if missing. The table below contains the possible values for the <code>riskMetric</code>:</li>
</ul>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Short name   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ZAYATZ   </td><td class="markdownTableBodyNone">Zayatz estimator of uniqueness    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">KRM   </td><td class="markdownTableBodyNone">K-Ratio risk metric    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">FKRM   </td><td class="markdownTableBodyNone">K-Ratio metric with probabilistic superpopulation estimation    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">HGEORM   </td><td class="markdownTableBodyNone">Hypergeometric-based superpopulation risk model    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">BINOM   </td><td class="markdownTableBodyNone">Binomial-based superpopulation risk model   </td></tr>
</table>
<ul>
<li>The <code>riskMetricOptions</code> field specifies the options of the risk metric defined in the <code>riskMetric</code> field. Its value is a JSON object. The fields of such an object depend on the risk metric required. The following table specifies the options required by each metric:</li>
</ul>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Metric name   </th><th class="markdownTableHeadNone">Option   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ZAYATZ   </td><td class="markdownTableBodyNone">N   </td><td class="markdownTableBodyNone">Population size, must be an integer greater than 0    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">KRM   </td><td class="markdownTableBodyNone">gamma   </td><td class="markdownTableBodyNone">Ratio of the dataset with respect to the original population. The value must be a real number in (0, 1]    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">FKRM   </td><td class="markdownTableBodyNone">population   </td><td class="markdownTableBodyNone">Population size, must be an integer greater than 0    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">HGEORM   </td><td class="markdownTableBodyNone">N   </td><td class="markdownTableBodyNone">Population size, must be an integer greater than 0    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">BINOM   </td><td class="markdownTableBodyNone">N   </td><td class="markdownTableBodyNone">Population size, must be an integer greater than 0    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">useGlobalP   </td><td class="markdownTableBodyNone">Boolean value (true, false) to specify if using a global (true) or local (false) population model   </td></tr>
</table>
<ul>
<li>The <code>estimateUniqueness</code> field specifies if the output should include the estimation results for uniques. The estimated real uniques are calculated based on the columns that are marked for linking. The <code>N</code> option must be set to the <code>riskMetricOptions</code> for the estimator to work.</li>
</ul>
<h2><a class="anchor" id="autotoc_md158"></a>
The &lt;tt&gt;columnInformation&lt;/tt&gt; section</h2>
<p>The <code>columnInformation</code> section contains information for each column. It is an array and each element of the array is an object. Each object needs to have the key <code>type</code> that declares if the column is a quasi-identifier (value is <code>QUASI</code>), sensitive (value is <code>SENSITIVE</code>) or if we don't handle this column (value is <code>NORMAL</code>).</p>
<p>The columns with type <code>QUASI</code> will be anonymized by the anonymization algorithm. For the <code>QUASI</code> entries, we need to specify the hierarchy to which it belongs. The hierarchy value must match one of the keys in the <code>hierarchies</code> section. See the next section for details on how to specify hierarchies. We also need to specify if the attribute is categorical or not throught the <code>isCategorical</code> boolean field.</p>
<p>For each <code>QUASI</code> column, we can optionally specify the <code>weight</code> and <code>maximumLevel</code>. The <code>weight</code> is used in the calculation of the information loss metric and must be a positive number. Its default value is 1. The <code>maximumLevel</code> specifies the maximum level in the hierarchy to which we should anonymize. The anonymization algorithm will not anonymize that column above this level. By default, the <code>maximumLevel</code> is set to -1, which means that the algorithm is allowed to anonymize that column up to its maximum hierarchy level.</p>
<p>For the columns of type <code>NORMAL</code> or <code>SENSITIVE</code> no other fields are required.</p>
<p>Each column that needs to be part of the risk calculation needs to have a boolean field with the name <code>isForLinking</code> in its column information attributes and the value set to true.</p>
<h2><a class="anchor" id="autotoc_md159"></a>
The &lt;tt&gt;hierarchies&lt;/tt&gt; section</h2>
<p>This section contains information about the generalization hierarchies that will be used during the anonymization process. It is a JSON object and its keys are used as references in the <code>columnInformation</code> section.</p>
<p>Each key in the <code>hierarchies</code> section specifies a hierarchy. We have three ways to specify a hierarchy:</p>
<ul>
<li>Materialized hierarchy. In that case, the value of the key is a JSON array of arrays. Each individual array consists of string elements. An example of a materialized hierarchy is as follows:</li>
</ul>
<div class="fragment"><div class="line">[</div>
<div class="line">    [&quot;M&quot;, &quot;Person&quot;],</div>
<div class="line">    [&quot;F&quot;, &quot;Person&quot;]    </div>
<div class="line">]</div>
</div><!-- fragment --><p>In the configuration example above, the <code>gender</code> hierarchy is a materialized hierarchy.</p>
<ul>
<li>Predefined hierarchy. The toolkit comes with a set of predefined materialized hierarchies. In this case, the value of the key is a string that defines the name of the predefined hierarchy.</li>
</ul>
<p>In the configuration example above, the <code>date</code> hierarchy is a predefined materialized hierarchy that points to the <code>DATE</code>.</p>
<p>The following table contains a list of the available hierarchies along with the provider type that needs to be used as a parameter and the description of the generalization levels:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Hierarchy   </th><th class="markdownTableHeadNone">Key name   </th><th class="markdownTableHeadNone">Generalization levels    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">City   </td><td class="markdownTableBodyNone">CITY   </td><td class="markdownTableBodyNone">City, country, continent, *    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Country   </td><td class="markdownTableBodyNone">COUNTRY   </td><td class="markdownTableBodyNone">Country, continent, *    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Gender   </td><td class="markdownTableBodyNone">GENDER   </td><td class="markdownTableBodyNone">Gender, *    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Race   </td><td class="markdownTableBodyNone">RACE   </td><td class="markdownTableBodyNone">Race, *    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Marital status   </td><td class="markdownTableBodyNone">MARITAL_STATUS   </td><td class="markdownTableBodyNone">Marital status, category (alone or in-marriage), *    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">ZIP code   </td><td class="markdownTableBodyNone">ZIPCODE   </td><td class="markdownTableBodyNone">5-digit value, 4-digit value, 3-digit value, 2-digit value, 1-digit value, *   </td></tr>
</table>
<ul>
<li>Custom loaded hierarchy. The user is able to implement their own hierarchies and load them in the toolkit. In this case, the value of the key is an object that contains:<ol type="1">
<li>The <code>className</code> which defines the class name to be loaded. It must be a fully qualified class name</li>
<li>An <code>options</code> field that contains the options to be passed to the initialization of the hierarchy. The options are passed as <code>JsonNode</code> instances to the constructor of the hierarchy</li>
</ol>
</li>
</ul>
<p>In the configuration example above, the <code>age</code> hierarchy is a custom loaded hiearchy. The class <code>com.ibm.research.hierarchies.custom.age</code> is loaded and empty options are passed to its constructor.</p>
<h2><a class="anchor" id="autotoc_md160"></a>
The &lt;tt&gt;privacyConstraints&lt;/tt&gt; sections</h2>
<p>The anonymization algorithm requires a list of privacy constraints to operate. This list must include the k-anonymity constraint and then optionally the l-diversity constraint. The <code>privacyConstraints</code> section is a JSON array containing objects, each object modelling a privacy constraint. Each privacy constraint has a field <code>name</code> and then a set of constraint-specific options. The valid constraint names are:</p>
<ul>
<li><code>k</code> for k-anonymity</li>
<li><code>distinctL</code> for distinct L-diversity</li>
</ul>
<p>The k-anonymity constraint requires an option with the name <code>k</code> that contains the k-value as an integer. An example of a k-anonymity object is the following:</p>
<div class="fragment"><div class="line">{&quot;name&quot;: &quot;k&quot;, &quot;k&quot;: 2}</div>
</div><!-- fragment --><p> The l-diversity constraint requires an option with the name <code>l</code> that contains the l-value as an integer. An example of a l-diversity object is the following:</p>
<div class="fragment"><div class="line">{&quot;name&quot;: &quot;distinctL&quot;, &quot;l&quot;: 2}</div>
</div><!-- fragment --><ul>
<li><code>entropyL</code> for entropy-based L-diversity. Also requires an <code>l</code> parameter:</li>
</ul>
<div class="fragment"><div class="line">{&quot;name&quot;: &quot;entropyL&quot;, &quot;l&quot;: 2}</div>
</div><!-- fragment --><ul>
<li><code>recursiveCL</code> for recursive CL-diversity. Requires two parameters, <code>c</code> and <code>l</code>:</li>
</ul>
<div class="fragment"><div class="line">{&quot;name&quot;: &quot;recursiveCL&quot;, &quot;l&quot;: 2, &quot;c&quot;: 1}</div>
</div><!-- fragment --><ul>
<li><code>tCloseness</code> for t-closeness</li>
</ul>
<p>The t-closeness constraint requires an option with the name <code>t</code>. An example is the following:</p>
<div class="fragment"><div class="line">{&quot;name&quot;: &quot;tCloseness&quot;, &quot;t&quot;: 0.2}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md161"></a>
Report output</h2>
<p>At the end of the anonymization process, a report will be printed in the standard output. A sample output follows:</p>
<div class="fragment"><div class="line">{</div>
<div class="line">    &quot;enforcedSuppressionRate&quot;: 0.0,</div>
<div class="line">    &quot;estimateUniqueness&quot;: {</div>
<div class="line">        &quot;estimatedRealUniques&quot;: 0.0,</div>
<div class="line">        &quot;uniques&quot;: 0.0</div>
<div class="line">    },</div>
<div class="line">    &quot;generalizationLevel&quot;: &quot;0:0:0&quot;,</div>
<div class="line">    &quot;globalInformationLoss&quot;: {</div>
<div class="line">        &quot;lowerBound&quot;: 0.0,</div>
<div class="line">        &quot;name&quot;: &quot;Categorical Precision&quot;,</div>
<div class="line">        &quot;upperBound&quot;: 1.0,</div>
<div class="line">        &quot;value&quot;: 0.0</div>
<div class="line">    },</div>
<div class="line">    &quot;perColumnInformationLoss&quot;: [</div>
<div class="line">        {</div>
<div class="line">            &quot;lowerBound&quot;: 0.0,</div>
<div class="line">            &quot;name&quot;: &quot;Categorical Precision&quot;,</div>
<div class="line">            &quot;upperBound&quot;: 1.0,</div>
<div class="line">            &quot;value&quot;: 0.0</div>
<div class="line">        },</div>
<div class="line">        {</div>
<div class="line">            &quot;lowerBound&quot;: 0.0,</div>
<div class="line">            &quot;name&quot;: &quot;Categorical Precision&quot;,</div>
<div class="line">            &quot;upperBound&quot;: 1.0,</div>
<div class="line">            &quot;value&quot;: 0.0</div>
<div class="line">        },</div>
<div class="line">        {</div>
<div class="line">            &quot;lowerBound&quot;: 0.0,</div>
<div class="line">            &quot;name&quot;: &quot;Categorical Precision&quot;,</div>
<div class="line">            &quot;upperBound&quot;: 1.0,</div>
<div class="line">            &quot;value&quot;: 0.0</div>
<div class="line">        }</div>
<div class="line">    ],</div>
<div class="line">    &quot;risk&quot;: 0.17166997233063938</div>
<div class="line">}</div>
</div><!-- fragment --><ul>
<li>The <code>generalizationLevel</code> will describe the number of performed generalization steps for each column</li>
<li>The <code>enforcedSuppressionRate</code> contains the suppression rate actually performed by the anonymization algorithm. It is a percentage of records and its value ranges from 0 too 100</li>
<li>The <code>globalInformationLoss</code> reports the information loss for the entire dataset. The information loss report includes the lower and upper bound values of the metric, named <code>lowerBound</code> and <code>upperBound</code> respectively, the name of the metric used and the report value.</li>
<li>The <code>perColumnInformationLoss</code> reports the information loss for each quasi column. The reporting order follows the order of columns declared as QUASI. The structure of the information loss report for each column is the same as the one reported in the <code>globalInformationLoss</code> field</li>
<li>The <code>risk</code> attribute contains the calculated risk value</li>
<li>The <code>estimateUniqueness</code> attribute contains the uniqueness estimation results. The results include the uniques found in the data (field name is <code>uniques</code>) and the estimated real uniques, under the field <code>estimatedRealUniques</code>. Only the columns with the <code>isForLinking</code> set to true are considered for uniqueness estimation. If the input configuration has the <code>estimateUniqueness</code> attribute set to <code>false</code> then this attribute will be set to <code>null</code>.</li>
</ul>
<h2><a class="anchor" id="autotoc_md162"></a>
The &lt;tt&gt;privacyConstraints&lt;/tt&gt; sections</h2>
<p>The anonymization algorithm requires a list of privacy constraints to operate. This list must include the k-anonymity constraint and then optionally the l-diversity constraint. The <code>privacyConstraints</code> section is a JSON array containing objects, each object modelling a privacy constraint. Each privacy constraint has a field <code>name</code> and then a set of constraint-specific options. The valid constraint names are:</p>
<ul>
<li><code>k</code> for k-anonymity</li>
<li><code>distinctL</code> for distinct L-diversity</li>
</ul>
<p>The k-anonymity constraint requires an option with the name <code>k</code> that contains the k-value as an integer. An example of a k-anonymity object is the following:</p>
<div class="fragment"><div class="line">{&quot;name&quot;: &quot;k&quot;, &quot;k&quot;: 2}</div>
</div><!-- fragment --><p> The l-diversity constraint requires an option with the name <code>l</code> that contains the l-value as an integer. An example of a l-diversity object is the following:</p>
<div class="fragment"><div class="line">{&quot;name&quot;: &quot;distinctL&quot;, &quot;l&quot;: 2}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md163"></a>
Report output</h2>
<p>At the end of the anonymization process, a report will be printed in the standard output. A sample output follows:</p>
<div class="fragment"><div class="line">{</div>
<div class="line">    &quot;enforcedSuppressionRate&quot;: 0.0,</div>
<div class="line">    &quot;generalizationLevel&quot;: &quot;0:0:0&quot;</div>
<div class="line">}</div>
</div><!-- fragment --><ul>
<li>The <code>generalizationLevel</code> will describe the number of performed generalization steps for each column</li>
<li>The <code>enforcedSuppressionRate</code> contains the suppression rate actually performed by the anonymization algorithm. It is a percentage of records and its value ranges from 0 too 100</li>
</ul>
<h2><a class="anchor" id="autotoc_md164"></a>
Developer guide for implementing a generalization hierarchy</h2>
<p>A class that wants to implement a generalization hierarchy needs to implement the <code>com.ibm.research.drl.dpt.algorithms.anonymization.hierarchies.GeneralizationHierarchy</code> interface.</p>
<p>The interface contains the following methods:</p>
<div class="fragment"><div class="line">int getHeight();</div>
<div class="line">int getTotalLeaves();</div>
<div class="line">int leavesForNode(String value);</div>
<div class="line">Set&lt;String&gt; getNodeLeaves(String value);</div>
<div class="line">int getNodeLevel(String value);</div>
<div class="line">String getTopTerm();</div>
<div class="line">String encode(String value, int level, boolean randomizeOnFail);</div>
</div><!-- fragment --><p>The <code>getHeight</code> function returns the height of the hierarchy.</p>
<p>The <code>getTotalLeaves</code> returns the number of leaves of the hierarchy.</p>
<p>The <code>leavesForNode</code> returns the number of leaves of a specific node in the hierarchy. The <code>getNodeLeaves</code> functions returns a set of these leaves.</p>
<p>The <code>getNodeLevel</code> returns the level of a value in the hierarchy.</p>
<p>The <code>getTopTerm</code> returns the value of the top term in the hierarchy.</p>
<p>The <code>encode</code> function is responsible for encoding a value to a generalization level.</p>
<p>Let's assume that we want to implement a hierarchy for 5-digit ZIP codes. In each level of the hierarchy, a digit of the ZIP code will be replaced by an asterisk. For example, the ZIP code 12345 will become 1234* at level 1, 123** at level 2 and so on and finally at level 5 it will be *****.</p>
<p>This hierachy has 6 levels:</p>
<div class="fragment"><div class="line">int getHeight() { </div>
<div class="line">    return 6;</div>
<div class="line">}</div>
</div><!-- fragment --><p>The total leaves of the hierarchy are 10000 (all 5-digit ZIP codes):</p>
<div class="fragment"><div class="line">int getTotalLeaves() {</div>
<div class="line">    return 10000;</div>
<div class="line">}</div>
</div><!-- fragment --><p>The top term for the hierarchy is <code>*****</code>:</p>
<div class="fragment"><div class="line">String getTopTerm() {</div>
<div class="line">    return &quot;*****&quot;;</div>
<div class="line">}</div>
</div><!-- fragment --><p>For an input value, its level in the hierarchy is the number of asterisks it has:</p>
<div class="fragment"><div class="line"> public int getNodeLevel(String value) {</div>
<div class="line">        int level = 0;</div>
<div class="line"> </div>
<div class="line">        for(int i = (value.length() - 1); i &gt;= 0; i++) {</div>
<div class="line">            if (value.charAt(i) == &#39;*&#39;) {</div>
<div class="line">                level++;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        return level;</div>
<div class="line">}</div>
</div><!-- fragment --><p>If we have as input value "1234*", then we know that it has 10 leaves</p>
<div class="fragment"><div class="line">int leavesForNode(String value) {</div>
<div class="line">    int level = getNodeLevel(value);</div>
<div class="line">    return (int)Math.pow(10, level);</div>
<div class="line">}</div>
</div><!-- fragment --><p>The <code>encode</code> function replaces the digits of the ZIP code based on the level specified (one level means the last digit replaces, two levels means the last two digits replaced and so on).</p>
<div class="fragment"><div class="line">public String encode(String value, int level, boolean randomizeOnFail) {</div>
<div class="line">       if (level &lt;= 0) {</div>
<div class="line">           return value;</div>
<div class="line">       }</div>
<div class="line"> </div>
<div class="line">       if (level &gt;= getHeight()) {</div>
<div class="line">           return getTopTerm();</div>
<div class="line">       }</div>
<div class="line"> </div>
<div class="line">       if (value.length() != 5) {</div>
<div class="line">           return getTopTerm();</div>
<div class="line">       }</div>
<div class="line"> </div>
<div class="line">       String prefix = value.substring(0, value.length() - level);</div>
<div class="line"> </div>
<div class="line">       for(int i = 0; i &lt; level; i++) {</div>
<div class="line">           prefix += &quot;*&quot;;</div>
<div class="line">       }</div>
<div class="line"> </div>
<div class="line">       return prefix;</div>
<div class="line">   }</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md165"></a>
Errors</h1>
<p>A runtime exception will be thrown at the following cases:</p>
<ul>
<li>misconfiguration in the masking configuration file (wrong types or values)</li>
<li>the input file cannot be found</li>
<li>the user has no permission to read the input file or write to the output directory</li>
<li>a suitable generalization level cannot be found </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PolyBM: Invoking the vulnerability detection Spark executor</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="LGS.jpg"/></td>
  <td id="projectalign">
   <div id="projectname">PolyBM<span id="projectnumber">&#160;0.1</span>
   </div>
   <div id="projectbrief">The PolyBM Data Analysis Tool is an AI tool that helps users profile, format, and anonymize data from CSV, JSON, and XML files. The tool offers various functionalities such as creating charts, generating data quality reports, and anonymizing sensitive data.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Invoking the vulnerability detection Spark executor </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The vulnerability executor requires the input and output paths as well as the configuration file. It can be invoked as:</p>
<div class="fragment"><div class="line">spark-submit \</div>
<div class="line">    --class com.ibm.research.drl.dpt.spark.vulnerability.DUCCSpark \</div>
<div class="line">    dpt-spark-$VERSION-jar-with-dependencies.jar \</div>
<div class="line">    -c vulnerability_detection.json \</div>
<div class="line">    -i test.csv \</div>
<div class="line">    -o report.json</div>
</div><!-- fragment --><p>where <code>vulnerability_detection.json</code> is the configuration file, <code>test.csv</code> is the input file and <code>report.json</code> is the output filename to save the report.</p>
<p>The full list of parameters to the executor is:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Parameter   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">-i,&ndash;input &lt;arg&gt;   </td><td class="markdownTableBodyNone">Path to the file to be masked (required)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">-o,&ndash;output &lt;arg&gt;   </td><td class="markdownTableBodyNone">Output file (required)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">-c,&ndash;conf &lt;arg&gt;   </td><td class="markdownTableBodyNone">Path to the configuration file (required)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">&ndash;remoteConf   </td><td class="markdownTableBodyNone">If set, then the configuration file will be read from HDFS (optional)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">&ndash;remoteOutput   </td><td class="markdownTableBodyNone">If set, the report will be saved to HDFS    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">&ndash;basePath &lt;arg&gt;   </td><td class="markdownTableBodyNone">Specify the base path of the input (optional)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">&ndash;report   </td><td class="markdownTableBodyNone">Report offending records (optional)   </td></tr>
</table>
<p>The <code>--remoteConf</code> option controls if the configuration file should be read from HDFS instead of the local filesystem.</p>
<h1><a class="anchor" id="autotoc_md259"></a>
Writing the configuration file</h1>
<p>The vulnerability detection action requires a configuration file in order to understand the input format and to control the identification behavior.</p>
<p>This is a sample template for the masking configuration:</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  &quot;k&quot;: 5,</div>
<div class="line">  &quot;inputFormat&quot;: &quot;CSV&quot;,</div>
<div class="line">  &quot;excludedFields&quot;: [</div>
<div class="line">    &quot;c0&quot;</div>
<div class="line">],</div>
<div class="line">  &quot;datasetOptions&quot;: {</div>
<div class="line">    &quot;delimiter&quot;: &quot;,&quot;,</div>
<div class="line">    &quot;quoteChar&quot;: &quot;\&quot;&quot;,</div>
<div class="line">    &quot;hasHeader&quot;: true,</div>
<div class="line">    &quot;trimFields&quot;: true</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><p><b>Explanation</b></p>
<ul>
<li><em>inputFormat</em>: defines the input format for the export.</li>
</ul>
<p>The following data input formats are supported:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Data input format type enumeration    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">CSV    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">JSON    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">DICOM    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">XLS    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">XLSX    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">XML    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">HL7    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">FHIR_JSON    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">PARQUET   </td></tr>
</table>
<ul>
<li><em>k</em> specifies the minimum size required for each equivalence class identified per attribute combination.</li>
<li><em>excludedFields</em> defines an array of field names (like <code>Column 0</code>, <code>_c0</code>, <code>USERID</code>) that needs to be excluded in the exploration of the dataset.</li>
<li><em>datasetOptions</em> contains a input-format specific options. As an example, the inputFormat CSV supports the following options:<ul>
<li><code>quoteChar</code>,</li>
<li><code>delimiter</code>,</li>
<li><code>hasHeader</code>, and</li>
<li><code>trimFields</code>.</li>
</ul>
</li>
</ul>
<p><b>Example for CSV files</b></p>
<p>In this example, we will inspect a CSV file, requing that each equivalence class has at least 5 members and ecluding column <code>c0</code> and we will only consider the first 1000 rows</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  &quot;k&quot;: 5,</div>
<div class="line">  &quot;inputFormat&quot;: &quot;CSV&quot;,</div>
<div class="line">  &quot;excludedFields&quot;: [</div>
<div class="line">    &quot;c0&quot;</div>
<div class="line">  ],</div>
<div class="line">  &quot;datasetOptions&quot;: {</div>
<div class="line">    &quot;delimiter&quot;: &quot;,&quot;,</div>
<div class="line">    &quot;quoteChar&quot;: &quot;\&quot;&quot;,</div>
<div class="line">    &quot;hasHeader&quot;: false,</div>
<div class="line">    &quot;trimFields&quot;: true</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md260"></a>
Output structure</h1>
<p>The output will be a dictionary having three fields.</p>
<ul>
<li><em>k</em>, the k-value specified in the configuration,</li>
<li><em>excludedFields</em>, the list of fields marked to be excluded from the analysis, as spefified in the configuration</li>
<li><em>vulnerabilities</em>, the list of identified vulnerabilities. This field is a list of lists of strings, each of which specifies the list of colum names (either retrieved from the configuration or autogenerated).</li>
<li><em>offendingRecords</em> will contain the number of offending records for each vulnerability if <code>--report</code> is specified in command line parameters else it will be empty</li>
<li><em>totalRecords</em> contains the total number of records in the analysed dataset</li>
</ul>
<p>The keys to each section will be the field names. For each key the value is an array of the identified types information, which includes the data type as <code>typeName</code> and the number of instances that was found in the data as <code>count</code>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  &quot;k&quot;: 5,</div>
<div class="line">  &quot;excludedFields&quot;: [],</div>
<div class="line">  &quot;vulnerabilities&quot;: [</div>
<div class="line">    [ &quot;Column 0&quot; ],</div>
<div class="line">    [ &quot;Column 2&quot; ],</div>
<div class="line">    [ &quot;Column 1&quot;, &quot;Column 4&quot; ],</div>
<div class="line">    [ &quot;Column 1&quot;, &quot;Column 5&quot; ],</div>
<div class="line">    [ &quot;Column 1&quot;, &quot;Column 6&quot; ]</div>
<div class="line">  ],</div>
<div class="line">  &quot;offendingRecords&quot;: {</div>
<div class="line">    &quot;[Column 0]&quot;: 1000,</div>
<div class="line">    &quot;[Column 2]&quot;: 1200,</div>
<div class="line">    &quot;[Column 1,Column 4]&quot;: 1000,</div>
<div class="line">    &quot;[Column 1,Column 5]&quot;: 1000,</div>
<div class="line">    &quot;[Column 1,Column 6]&quot;: 1000</div>
<div class="line">  },</div>
<div class="line">  &quot;totalRecords&quot;: 10000</div>
<div class="line">}</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md261"></a>
Errors</h1>
<p>A runtime exception will be thrown at the following cases:</p>
<ul>
<li>misconfiguration in the configuration file (wrong types or values)</li>
<li>the input file cannot be found</li>
<li>the user has no permission to read the input file or write to the output directory </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>

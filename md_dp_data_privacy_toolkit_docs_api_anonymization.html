<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PolyBM: Anonymizing a CSV dataset</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="LGS.jpg"/></td>
  <td id="projectalign">
   <div id="projectname">PolyBM<span id="projectnumber">&#160;0.1</span>
   </div>
   <div id="projectbrief">The PolyBM Data Analysis Tool is an AI tool that helps users profile, format, and anonymize data from CSV, JSON, and XML files. The tool offers various functionalities such as creating charts, generating data quality reports, and anonymizing sensitive data.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('md_dp_data_privacy_toolkit_docs_api_anonymization.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Anonymizing a CSV dataset </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The anonymization algorithms require 4 input parameters:</p>
<ol type="1">
<li>The dataset to be loaded. The current anonymization algorithms support CSV datasets</li>
<li>A list of ColumnInformation objects. These objects contain information about the column: if the column is categorical or numerical, if it is quasi, sensitive or non-sensitive, the weight they contribute to the information loss and if they are considered as part of the linking attributes for re-identification risk calculation. The <code>Column Information</code> section includes further details.</li>
<li>A list of privacy constraints. These constraints specify the k-anonymity and/or l-diversity and/or t-closeness privacy guarantees that the algorithms must achieve. The <code>Privacy constraints</code> describes in detail how to construct the privacy constraints objects Algorithm-specific options.</li>
</ol>
<h1><a class="anchor" id="autotoc_md17"></a>
Available algorithms</h1>
<p>The following table describes the available anonymization algorithms:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Algorithm Name   </th><th class="markdownTableHeadNone">Reference    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Optimal Lattice Anonymization (OLA)   </td><td class="markdownTableBodyNone">El Emam, Khaled, et al. "A globally optimal k-anonymity method for the de-identification of health data." Journal of the American Medical Informatics Association 16.5 (2009): 670-682.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Mondrian   </td><td class="markdownTableBodyNone">LeFevre, Kristen, David J. DeWitt, and Raghu Ramakrishnan. "Mondrian multidimensional k-anonymity." 22nd International conference on data engineering (ICDE'06). IEEE, 2006.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">KMeans   </td><td class="markdownTableBodyNone">Jun-Lin Lin and Meng-Cheng Wei. 2008. An efficient clustering method for k-anonymization. In Proceedings of the 2008 international workshop on Privacy and anonymity in information society (PAIS '08). Association for Computing Machinery, New York, NY, USA, 46â€“50.   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md18"></a>
Invocation of the algorithms</h1>
<p>The steps to invoke an anonymization algorithm are the following:</p>
<ol type="1">
<li>Create an AnonymizationAlgorithm instance, for example:</li>
</ol>
<div class="fragment"><div class="line">AnonymizationAlgorithm ola = <span class="keyword">new</span> OLA();</div>
<div class="line">AnonymizationAlgorithm mondrian = <span class="keyword">new</span> Mondrian();</div>
<div class="line">AnonymizationAlgorithm kMeans = <span class="keyword">new</span> KMeans();</div>
</div><!-- fragment --><ol type="1">
<li>Initialize the algorithm and pass the dataset, column information, privacy constraints and the algorithm specific options</li>
</ol>
<p>The initialization method definition is the following:</p>
<div class="fragment"><div class="line">AnonymizationAlgorithm initialize(</div>
<div class="line">                   IPVDataset dataset, </div>
<div class="line">                   List&lt;ColumnInformation&gt; columnInformationList,</div>
<div class="line">                   List&lt;PrivacyConstraint&gt; privacyConstraints, </div>
<div class="line">                   AnonymizationAlgorithmOptions options);</div>
</div><!-- fragment --><ol type="1">
<li>Call the <code>apply()</code> method to get the anonymized dataset. The function will return an <code>IPVDataset</code>:</li>
</ol>
<div class="fragment"><div class="line">IPVDatased anonymized  = ola.apply()</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md19"></a>
Column information &lt;a name="#column_information"&gt;&lt;/a&gt;</h1>
<p>The anonymization algorithms require to know information about each column. The identification of quasi identifiers, direct identifiers and sensitive fields is a required characterization that is required from the user. Vulnerability detection capabilities, described in the corresponding <a class="el" href="md_dp_data_privacy_toolkit_docs_api_vulnerability.html">section</a> can assist in the identification.</p>
<h2><a class="anchor" id="autotoc_md20"></a>
Quasi columns</h2>
<h3><a class="anchor" id="autotoc_md21"></a>
Categorical</h3>
<p>In order to represent a categorical quasi-column, we need to instantiate a <code>CategoricalInformation</code> object. The constructor is the following:</p>
<div class="fragment"><div class="line"><span class="keyword">public</span> CategoricalInformation(</div>
<div class="line">    GeneralizationHierarchy hierarchy, </div>
<div class="line">    ColumnType columnType, </div>
<div class="line">    <span class="keywordtype">double</span> weight, </div>
<div class="line">    <span class="keywordtype">int</span> maximumLevel, </div>
<div class="line">    <span class="keywordtype">boolean</span> isForLinking);</div>
</div><!-- fragment --><p>and requires five parameters:</p>
<ol type="1">
<li>The <code>hierarchy</code> which is the generalization hierarchy for the attribute. See the next Section for details how to generate hierarchies</li>
<li>The <code>columnType</code> for this column. This should have the value <code>ColumnType.QUASI</code> since we need to represent a quasi-identifier</li>
<li>The <code>weight</code> which is the weight we should assign for that column when calculating the information loss.</li>
<li>The <code>maximumLevel</code> which is the maximum generalization level we want to apply. This level is only considered when we use the <code>OLA</code> algorithm. If the value is -1 then there is no maximum level applied.</li>
<li>A boolean <code>isForLinking</code> that denotes if the column should be considered as part of the linking attributes when we calculate the re-identification risk. <br  />
</li>
</ol>
<h3><a class="anchor" id="autotoc_md22"></a>
Numerical</h3>
<p>In order to represent a numerical quasi-column, we need to instantiate a <code>NumericalRange</code> object. The numerical quasi-identifiers are considered in the case of <code>Mondrian</code> and <code>KMeans</code>.</p>
<p>The constructor is the following:</p>
<div class="fragment"><div class="line"><span class="keyword">public</span> NumericalRange(</div>
<div class="line">    List&lt;Double&gt; sortedValues, </div>
<div class="line">    ColumnType columnType, </div>
<div class="line">    <span class="keywordtype">double</span> weight, </div>
<div class="line">    <span class="keywordtype">boolean</span> isForLinking);</div>
</div><!-- fragment --><p>and requires five parameters:</p>
<ol type="1">
<li>A list of Double objects that <b>must be sorted</b></li>
<li>The <code>columnType</code> for this column. This should have the value <code>ColumnType.QUASI</code> since we need to represent a quasi-identifier</li>
<li>The <code>weight</code> which is the weight we should for that column when calculating the information loss.</li>
<li>A boolean <code>isForLinking</code> that denotes if the column should be considered as part of the linking attributes when we calculate the re-identification risk.</li>
</ol>
<p>There is a utility function located in the <code><a class="el" href="classcom_1_1ibm_1_1research_1_1drl_1_1dpt_1_1anonymization_1_1_column_information_generator.html">com.ibm.research.drl.dpt.anonymization.ColumnInformationGenerator</a></code> class that generates a <code>NumericalRange</code> object based on a dataset and the column index of the numerical attribute that we want to extract the information for:</p>
<div class="fragment"><div class="line"><span class="keyword">public</span> <span class="keyword">static</span> NumericalRange generateNumericalRange(</div>
<div class="line">        IPVDataset dataset, </div>
<div class="line">        <span class="keywordtype">int</span> column, </div>
<div class="line">        ColumnType columnType, </div>
<div class="line">        <span class="keywordtype">double</span> weight, </div>
<div class="line">        <span class="keywordtype">boolean</span> isForLinking);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md23"></a>
Sensitive columns</h2>
<p>If a column is considered sensitive then we can instantiate a <code>SensitiveColumnInformation</code>:</p>
<div class="fragment"><div class="line">ColumnInformation sensitive = <span class="keyword">new</span> SensitiveColumnInformation();</div>
</div><!-- fragment --><p>The default constructor does not consider the column as part of the linking attributes. If we want to make the column part of the linking attributes, then we can specify it as:</p>
<div class="fragment"><div class="line">ColumnInformation sensitive = <span class="keyword">new</span> SensitiveColumnInformation(<span class="keyword">true</span>);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md24"></a>
Non-quasi, non-sensitive columns</h2>
<p>If a column is non-quasi and non-sensitive then we can instantiate a <code>DefaultColumnInformation</code>:</p>
<div class="fragment"><div class="line">ColumnInformation normal = <span class="keyword">new</span> DefaultColumnInformation();</div>
</div><!-- fragment --><p>The default constructor does not consider the column as part of the linking attributes. If we want to make the column part of the linking attributes, then we can specify it as:</p>
<div class="fragment"><div class="line">ColumnInformation normal = <span class="keyword">new</span> DefaultColumnInformation(<span class="keyword">true</span>);</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md25"></a>
Hierarchies</h1>
<p>There are two types of hierarchies: a) materialized hierarchies, where the elements of the hierarchy are finite, manageable and can be specified in a structure (for example, a gender attribute has two elements) and b) computational-based where the number of elements are either infinite or too many to form a materialized hierarchy. For example, GPS coordinates and their generalizations are way too many to pre-specify them in a materialized hierarchy (only the specification would need several gigabytes of disk space). <br  />
</p>
<h2><a class="anchor" id="autotoc_md26"></a>
Specifying a materialized hierarchy</h2>
<p>Materialized hierarchies can be regarded as n-ary trees. The root of the tree is called the top term of the hierarchy while the leaves are the values encountered in the data.</p>
<p>The following example shows how to create a materialized hierarchy. We add a list of Strings, where the first element is the original value, the middle values are the generalizations and the final value is the top terms. The top terms for every row must match.</p>
<div class="fragment"><div class="line"><span class="keyword">public</span> MaterializedHierarchy createCountryHierarchy() {</div>
<div class="line"> </div>
<div class="line">    MaterializedHierarchy terms = <span class="keyword">new</span> MaterializedHierarchy();</div>
<div class="line">    </div>
<div class="line">   terms.add(Arrays.asList(<span class="stringliteral">&quot;Greece&quot;</span>, <span class="stringliteral">&quot;Europe&quot;</span>, <span class="stringliteral">&quot;*&quot;</span>));</div>
<div class="line">   terms.add(Arrays.asList(<span class="stringliteral">&quot;Italy&quot;</span>, <span class="stringliteral">&quot;Europe&quot;</span>, <span class="stringliteral">&quot;*&quot;</span>));</div>
<div class="line">   terms.add(Arrays.asList(<span class="stringliteral">&quot;Singapore&quot;</span>, <span class="stringliteral">&quot;Asia&quot;</span>, <span class="stringliteral">&quot;*&quot;</span>));</div>
<div class="line">   terms.add(Arrays.asList(<span class="stringliteral">&quot;China&quot;</span>, <span class="stringliteral">&quot;Asia&quot;</span>, <span class="stringliteral">&quot;*&quot;</span>));</div>
<div class="line">   </div>
<div class="line">   <span class="keywordflow">return</span> terms;</div>
<div class="line">}</div>
</div><!-- fragment --><p>The visual representation for the example above is the following:</p>
<p><img src="hierarchy_example.png" alt="Example of hierarchy" class="inline"/></p>
<h2><a class="anchor" id="autotoc_md27"></a>
Utility functions for hierarchy generation</h2>
<h3><a class="anchor" id="autotoc_md28"></a>
Use one of the pre-defined hierarchies</h3>
<p>The toolkit contains several pre-defined hierarchies. In order to retrieve one of the pre-defined hierarchies, the <code>getDefaultHierarchy</code> from the <code>GeneralizationHierarchyFactory</code> class can be invoked:</p>
<div class="fragment"><div class="line"><span class="keyword">public</span> <span class="keyword">static</span> GeneralizationHierarchy getDefaultHierarchy(ProviderType type);</div>
</div><!-- fragment --><p>The following table contains a list of the available hierarchies along with the provider type that needs to be used as a parameter and the description of the generalization levels:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Hierarchy   </th><th class="markdownTableHeadNone">ProviderType   </th><th class="markdownTableHeadNone">Generalization levels    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">City   </td><td class="markdownTableBodyNone">ProviderType.CITY   </td><td class="markdownTableBodyNone">City, country, continent, *    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Country   </td><td class="markdownTableBodyNone">ProviderType.COUNTRY   </td><td class="markdownTableBodyNone">Country, continent, *    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Gender   </td><td class="markdownTableBodyNone">ProviderType.GENDER   </td><td class="markdownTableBodyNone">Gender, *    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Race   </td><td class="markdownTableBodyNone">ProviderType.RACE   </td><td class="markdownTableBodyNone">Race, *    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Marital status   </td><td class="markdownTableBodyNone">ProviderType.MARITAL_STATUS   </td><td class="markdownTableBodyNone">Marital status, category (alone or in-marriage), *    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">ZIP code   </td><td class="markdownTableBodyNone">ProviderType.ZIPCODE   </td><td class="markdownTableBodyNone">5-digit value, 4-digit value, 3-digit value, 2-digit value, 1-digit value, *   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md29"></a>
Simple two-level hierarchy from a list of values</h3>
<p>If we want to create a hierarchy which has two levels, the original values and the top term, we can invoke the <code>getGenericFromFixedSet</code> function from the <code>GeneralizationHierarchyFactory</code> class:</p>
<div class="fragment"><div class="line"><span class="keyword">public</span> <span class="keyword">static</span> GeneralizationHierarchy </div>
<div class="line">        getGenericFromFixedSet(List&lt;String&gt; terms, String topTerm);</div>
</div><!-- fragment --><p>For example, if we have the values <code>A</code>, <code>B</code> and <code>C</code> and we want a simple two-level hierachy with the top term being <code>*</code> then we can create it as:</p>
<div class="fragment"><div class="line"><span class="keyword">import</span> com.ibm.research.drl.dpt.anonymization.hierarchies.GeneralizationHierarchyFactory;</div>
<div class="line"> </div>
<div class="line">GeneralizationHierarchy hierarchy =     </div>
<div class="line">    GeneralizationHierarchyFactory.getGenericFromFixedSet(Arrays.asList(<span class="stringliteral">&quot;A&quot;</span>, <span class="stringliteral">&quot;B&quot;</span>, <span class="stringliteral">&quot;C&quot;</span>), <span class="stringliteral">&quot;*&quot;</span>);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md30"></a>
Developer guide for implementing a generalization hierarchy</h2>
<p>A class that wants to implement a generalization hierarchy needs to implement the <code>com.ibm.research.drl.dpt.algorithms.anonymization.hierarchies.GeneralizationHierarchy</code> interface.</p>
<p>The interface contains the following methods:</p>
<div class="fragment"><div class="line">int getHeight();</div>
<div class="line">int getTotalLeaves();</div>
<div class="line">int leavesForNode(String value);</div>
<div class="line">Set&lt;String&gt; getNodeLeaves(String value);</div>
<div class="line">int getNodeLevel(String value);</div>
<div class="line">String getTopTerm();</div>
<div class="line">String encode(String value, int level, boolean randomizeOnFail);</div>
</div><!-- fragment --><p>The <code>getHeight</code> function returns the height of the hierarchy.</p>
<p>The <code>getTotalLeaves</code> returns the number of leaves of the hierarchy.</p>
<p>The <code>leavesForNode</code> returns the number of leaves of a specific node in the hierarchy. The <code>getNodeLeaves</code> functions returns a set of these leaves.</p>
<p>The <code>getNodeLevel</code> returns the level of a value in the hierarchy.</p>
<p>The <code>getTopTerm</code> returns the value of the top term in the hierarchy.</p>
<p>The <code>encode</code> function is responsible for encoding a value to a generalization level.</p>
<p>Let's assume that we want to implement a hierarchy for 5-digit ZIP codes. In each level of the hierarchy, a digit of the ZIP code will be replaced by an asterisk. For example, the ZIP code 12345 will become 1234* at level 1, 123** at level 2 and so on and finally at level 5 it will be *****.</p>
<p>This hierarchy has 6 levels:</p>
<div class="fragment"><div class="line">int getHeight() { </div>
<div class="line">    return 6;</div>
<div class="line">}</div>
</div><!-- fragment --><p>The total leaves of the hierarchy are 10000 (all 5-digit ZIP codes):</p>
<div class="fragment"><div class="line">int getTotalLeaves() {</div>
<div class="line">    return 10000;</div>
<div class="line">}</div>
</div><!-- fragment --><p>The top term for the hierarchy is <code>*****</code>:</p>
<div class="fragment"><div class="line">String getTopTerm() {</div>
<div class="line">    return &quot;*****&quot;;</div>
<div class="line">}</div>
</div><!-- fragment --><p>For an input value, its level in the hierarchy is the number of asterisks it has:</p>
<div class="fragment"><div class="line"> public int getNodeLevel(String value) {</div>
<div class="line">        int level = 0;</div>
<div class="line"> </div>
<div class="line">        for(int i = (value.length() - 1); i &gt;= 0; i++) {</div>
<div class="line">            if (value.charAt(i) == &#39;*&#39;) {</div>
<div class="line">                level++;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        return level;</div>
<div class="line">}</div>
</div><!-- fragment --><p>If we have as input value "1234*", then we know that it has 10 leaves</p>
<div class="fragment"><div class="line">int leavesForNode(String value) {</div>
<div class="line">    int level = getNodeLevel(value);</div>
<div class="line">    return (int)Math.pow(10, level);</div>
<div class="line">}</div>
</div><!-- fragment --><p>The <code>encode</code> function replaces the digits of the ZIP code based on the level specified (one level means the last digit replaces, two levels means the last two digits replaced and so on).</p>
<div class="fragment"><div class="line">public String encode(String value, int level, boolean randomizeOnFail) {</div>
<div class="line">       if (level &lt;= 0) {</div>
<div class="line">           return value;</div>
<div class="line">       }</div>
<div class="line"> </div>
<div class="line">       if (level &gt;= getHeight()) {</div>
<div class="line">           return getTopTerm();</div>
<div class="line">       }</div>
<div class="line"> </div>
<div class="line">       if (value.length() != 5) {</div>
<div class="line">           return getTopTerm();</div>
<div class="line">       }</div>
<div class="line"> </div>
<div class="line">       String prefix = value.substring(0, value.length() - level);</div>
<div class="line"> </div>
<div class="line">       for(int i = 0; i &lt; level; i++) {</div>
<div class="line">           prefix += &quot;*&quot;;</div>
<div class="line">       }</div>
<div class="line"> </div>
<div class="line">       return prefix;</div>
<div class="line">   }</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md31"></a>
Privacy constraints</h1>
<p>The anonymization algorithm requires a list of privacy constraints to operate. This list must include the k-anonymity constraint and then optionally the l-diversity and/or the t-closeness constraint.</p>
<h2><a class="anchor" id="autotoc_md32"></a>
&lt;em&gt;k&lt;/em&gt;-anonymity</h2>
<p>The <em>k</em>-anonymity constraint is initialized as:</p>
<div class="fragment"><div class="line"><span class="keyword">import</span> com.ibm.research.drl.dpt.anonymization.constraints.KAnonymity;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> k = 2;</div>
<div class="line">PrivacyConstraint kAnonymity = <span class="keyword">new</span> KAnonymity(k);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md33"></a>
l-diversity</h2>
<p>The toolkit contains three variants of l-diversity: distinct, entropy-based and recursive CL.</p>
<h3><a class="anchor" id="autotoc_md34"></a>
Distinct l-diversity</h3>
<p>The distinct l-diversity is initialized as:</p>
<div class="fragment"><div class="line"><span class="keyword">import</span> com.ibm.research.drl.dpt.anonymization.constraints.DistinctLDiversity;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> l = 2;</div>
<div class="line">PrivacyConstraint distincLDiversity = <span class="keyword">new</span> DistinctLDiversity(l);</div>
</div><!-- fragment --><p>where the <code>l</code> parameter represents the number of unique values within each equivalence class</p>
<h3><a class="anchor" id="autotoc_md35"></a>
Entropy-based l-diversity</h3>
<div class="fragment"><div class="line"><span class="keyword">import</span> com.ibm.research.drl.dpt.anonymization.constraints.EntropyLDiversity;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> l = 2;</div>
<div class="line">PrivacyConstraint entropyLDiversity = <span class="keyword">new</span> EntropyLDiversity(l);</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md36"></a>
Recursive cl-Diversity</h3>
<div class="fragment"><div class="line"><span class="keyword">import</span> com.ibm.research.drl.dpt.anonymization.constraints.RecursiveCLDiversity;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> l = 2;</div>
<div class="line"><span class="keywordtype">double</span> c = 0.1;</div>
<div class="line">PrivacyConstraint entropyLDiversity = <span class="keyword">new</span> RecursiveCLDiversity(l, c);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md37"></a>
t-closeness</h2>
<div class="fragment"><div class="line"><span class="keyword">import</span> com.ibm.research.drl.dpt.anonymization.constraints.TCloseness;</div>
<div class="line"> </div>
<div class="line">PrivacyConstraint tCloseness = <span class="keyword">new</span> TCloseness();</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md38"></a>
Algorithm-specific options</h1>
<p>Mondrian and KMeans have no specific options. A <code>null</code> value can be safely passed to their constructor.</p>
<p>For the case of OLA we pass a <code>OLAOptions</code> object which expects the maximum suppression rate as an input parameters, for example initializing OLA options with a 2% maximum suppression rate:</p>
<div class="fragment"><div class="line"><span class="keyword">import</span> com.ibm.research.drl.dpt.anonymization.ola.OLAOptions;</div>
<div class="line"> </div>
<div class="line">AnonymizationAlgorithmOptions olaOptions = <span class="keyword">new</span> OLAOptions(2.0);</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md39"></a>
Loading a dataset</h1>
<p>The toolkit supports CSV datasets and provides an abstraction of the data through the <code>IPVDataset</code> class. The dataset can be initialized from an <code>InputStream</code>, a <code>Reader</code> object, a file path or from an in-memory list of values.</p>
<p>The following constructor builds an <code>IPVDataset</code> by loading data from an input stream. The flag <code>hasHeader</code> denotes if the first row of the file should be treated as the CSV header. The <code>fieldDelimiter</code> represents the field delimiter and <code>quoteChar</code> is the quote character for the CSV parsing.</p>
<div class="fragment"><div class="line"><span class="keyword">public</span> <span class="keyword">static</span> IPVDataset load(</div>
<div class="line">        InputStream inputStream, </div>
<div class="line">        <span class="keywordtype">boolean</span> hasHeader, </div>
<div class="line">        Character fieldDelimiter,</div>
<div class="line">        Character quoteChar) <span class="keywordflow">throws</span> IOException</div>
</div><!-- fragment --><p>Other overloads are based on <code>Reader</code></p>
<div class="fragment"><div class="line"><span class="keyword">public</span> <span class="keyword">static</span> IPVDataset load(</div>
<div class="line">        Reader reader, </div>
<div class="line">        <span class="keywordtype">boolean</span> hasHeader, </div>
<div class="line">        Character fieldDelimiter,</div>
<div class="line">        Character quoteChar) <span class="keywordflow">throws</span> IOException</div>
</div><!-- fragment --><p>and file names:</p>
<div class="fragment"><div class="line"><span class="keyword">public</span> <span class="keyword">static</span> IPVDataset load(</div>
<div class="line">        String filename, </div>
<div class="line">        <span class="keywordtype">boolean</span> hasHeader, </div>
<div class="line">        Character fieldDelimiter,</div>
<div class="line">        Character quoteChar) <span class="keywordflow">throws</span> IOException</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md40"></a>
Examples</h1>
<h2><a class="anchor" id="autotoc_md41"></a>
Anomymizing a dataset using OLA and 2% maximum suppression rate</h2>
<p>For this example, we assume a dataset with the name with 4 columns. The first column is a patient ID which is already hashed, and we consider it as non-quasi and non-sensitive. The next three columns are quasi-identifiers: gender, race and ZIP code. We will use the pre-defined hierarchies available in the toolkit.</p>
<div class="fragment"><div class="line"><span class="keyword">import</span> com.ibm.research.drl.dpt.anonymization.*;</div>
<div class="line"><span class="keyword">import</span> com.ibm.research.drl.dpt.anonymization.constraints.KAnonymity;</div>
<div class="line"><span class="keyword">import</span> com.ibm.research.drl.dpt.anonymization.hierarchies.GeneralizationHierarchy;</div>
<div class="line"><span class="keyword">import</span> com.ibm.research.drl.dpt.anonymization.hierarchies.GeneralizationHierarchyFactory;</div>
<div class="line"><span class="keyword">import</span> com.ibm.research.drl.dpt.datasets.IPVDataset;</div>
<div class="line"><span class="keyword">import</span> com.ibm.research.drl.dpt.providers.ProviderType;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">import</span> java.io.File;</div>
<div class="line"><span class="keyword">import</span> java.io.FileInputStream;</div>
<div class="line"><span class="keyword">import</span> java.io.FileNotFoundException;</div>
<div class="line"><span class="keyword">import</span> java.io.IOException;</div>
<div class="line"><span class="keyword">import</span> java.util.ArrayList;</div>
<div class="line"><span class="keyword">import</span> java.util.List;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">public</span> <span class="keyword">class </span>OLAAnonymizationExample {</div>
<div class="line">    </div>
<div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> IPVDataset anonymizeDataset(String filename) <span class="keywordflow">throws</span>  IOException {</div>
<div class="line">    </div>
<div class="line">        GeneralizationHierarchy genderHierarchy = GeneralizationHierarchyFactory.getDefaultHierarchy(ProviderType.GENDER);</div>
<div class="line">        GeneralizationHierarchy raceHierarchy = GeneralizationHierarchyFactory.getDefaultHierarchy(ProviderType.RACE);</div>
<div class="line">        GeneralizationHierarchy zipcodeHierarchy = GeneralizationHierarchyFactory.getDefaultHierarchy(ProviderType.ZIPCODE);</div>
<div class="line">        </div>
<div class="line">        List&lt;ColumnInformation&gt; columnInformation = <span class="keyword">new</span> ArrayList&lt;&gt;();</div>
<div class="line">        columnInformation.add(<span class="keyword">new</span> DefaultColumnInformation(<span class="keyword">false</span>)); </div>
<div class="line">        columnInformation.add(<span class="keyword">new</span> CategoricalInformation(genderHierarchy, ColumnType.QUASI, 1.0, -1, <span class="keyword">true</span>));</div>
<div class="line">        columnInformation.add(<span class="keyword">new</span> CategoricalInformation(genderHierarchy, ColumnType.QUASI, 1.0, -1, <span class="keyword">true</span>));</div>
<div class="line">        columnInformation.add(<span class="keyword">new</span> CategoricalInformation(raceHierarchy, ColumnType.QUASI, 1.0, -1, <span class="keyword">true</span>));</div>
<div class="line">        columnInformation.add(<span class="keyword">new</span> CategoricalInformation(zipcodeHierarchy, ColumnType.QUASI, 1.0, -1, <span class="keyword">true</span>));</div>
<div class="line"> </div>
<div class="line">        <span class="keywordtype">int</span> k = 10;</div>
<div class="line">        <span class="keywordtype">double</span> maximumSuppressionRate = 2.0;</div>
<div class="line">        </div>
<div class="line">        IPVDataset originalDataset = IPVDataset.load(<span class="keyword">new</span> FileInputStream(<span class="keyword">new</span> File(filename))); <span class="comment">//we load the file</span></div>
<div class="line">       </div>
<div class="line">        List&lt;PrivacyConstraint&gt; privacyConstraints = <span class="keyword">new</span> ArrayList&lt;&gt;();</div>
<div class="line">        privacyConstraints.add(<span class="keyword">new</span> KAnonymity(k)); <span class="comment">// we add the k-anonymity constraint</span></div>
<div class="line">        </div>
<div class="line">        AnonymizationAlgorithm ola = <span class="keyword">new</span> OLA(); <span class="comment">//we instantiate and initialize the anonymization algorithm</span></div>
<div class="line">        ola.initialize(originalDataset, columnInformation, privacyConstraints, <span class="keyword">new</span> OLAOptions(maximumSuppressionRate));</div>
<div class="line">        </div>
<div class="line">        IPVDataset anonymizedDataset = ola.apply(); </div>
<div class="line"> </div>
<div class="line">        System.out.println(ola.reportSuppressionRate());</div>
<div class="line">        </div>
<div class="line">        <span class="keywordflow">return</span> anonymizedDataset;</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md42"></a>
Anonymizing a dataset using Mondrian</h2>
<p>For this example, we assume a dataset with the name with 5 columns. The first column is a patient ID which is already hashed and we consider it as non-quasi and non-sensitive. The next four columns are quasi-identifiers: gender (categorical), race (categorical), ZIP code (categorical) and height (numerical). We will use the pre-defined hierarchies available in the toolkit for the categorical quasis.</p>
<div class="fragment"><div class="line"><span class="keyword">import</span> com.ibm.research.drl.dpt.anonymization.*;</div>
<div class="line"><span class="keyword">import</span> com.ibm.research.drl.dpt.anonymization.constraints.KAnonymity;</div>
<div class="line"><span class="keyword">import</span> com.ibm.research.drl.dpt.anonymization.hierarchies.GeneralizationHierarchy;</div>
<div class="line"><span class="keyword">import</span> com.ibm.research.drl.dpt.anonymization.hierarchies.GeneralizationHierarchyFactory;</div>
<div class="line"><span class="keyword">import</span> com.ibm.research.drl.dpt.anonymization.mondrian.Mondrian;</div>
<div class="line"><span class="keyword">import</span> com.ibm.research.drl.dpt.datasets.IPVDataset;</div>
<div class="line"><span class="keyword">import</span> com.ibm.research.drl.dpt.providers.ProviderType;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">import</span> java.io.File;</div>
<div class="line"><span class="keyword">import</span> java.io.FileInputStream;</div>
<div class="line"><span class="keyword">import</span> java.io.FileNotFoundException;</div>
<div class="line"><span class="keyword">import</span> java.io.IOException;</div>
<div class="line"><span class="keyword">import</span> java.util.ArrayList;</div>
<div class="line"><span class="keyword">import</span> java.util.List;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">public</span> <span class="keyword">class </span>MondrianAnonymizationExample {</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> IPVDataset anonymizeDataset(String filename) <span class="keywordflow">throws</span> IOException {</div>
<div class="line">        IPVDataset originalDataset = IPVDataset.load(<span class="keyword">new</span> FileInputStream(<span class="keyword">new</span> File(filename))); <span class="comment">//we load the file</span></div>
<div class="line"> </div>
<div class="line">        GeneralizationHierarchy genderHierarchy = GeneralizationHierarchyFactory.getDefaultHierarchy(ProviderType.GENDER);</div>
<div class="line">        GeneralizationHierarchy raceHierarchy = GeneralizationHierarchyFactory.getDefaultHierarchy(ProviderType.RACE);</div>
<div class="line">        GeneralizationHierarchy zipcodeHierarchy = GeneralizationHierarchyFactory.getDefaultHierarchy(ProviderType.ZIPCODE);</div>
<div class="line">        ColumnInformation heightInformation = ColumnInformationGenerator.generateNumericalRange(originalDataset, 4, ColumnType.QUASI, 1.0, <span class="keyword">true</span>); <span class="comment">//we generate the height column information from the data</span></div>
<div class="line"> </div>
<div class="line">        List&lt;ColumnInformation&gt; columnInformation = <span class="keyword">new</span> ArrayList&lt;&gt;();</div>
<div class="line">        columnInformation.add(<span class="keyword">new</span> DefaultColumnInformation(<span class="keyword">false</span>));</div>
<div class="line">        columnInformation.add(<span class="keyword">new</span> CategoricalInformation(genderHierarchy, ColumnType.QUASI, 1.0, -1, <span class="keyword">true</span>));</div>
<div class="line">        columnInformation.add(<span class="keyword">new</span> CategoricalInformation(raceHierarchy, ColumnType.QUASI, 1.0, -1, <span class="keyword">true</span>));</div>
<div class="line">        columnInformation.add(<span class="keyword">new</span> CategoricalInformation(zipcodeHierarchy, ColumnType.QUASI, 1.0, -1, <span class="keyword">true</span>));</div>
<div class="line">        columnInformation.add(heightInformation);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordtype">int</span> k = 10;</div>
<div class="line"> </div>
<div class="line">        List&lt;PrivacyConstraint&gt; privacyConstraints = <span class="keyword">new</span> ArrayList&lt;&gt;();</div>
<div class="line">        privacyConstraints.add(<span class="keyword">new</span> KAnonymity(k)); <span class="comment">// we add the k-anonymity constraint</span></div>
<div class="line"> </div>
<div class="line">        AnonymizationAlgorithm mondrian = <span class="keyword">new</span> Mondrian(); <span class="comment">//we instantiate and initialize the anonymization algorithm</span></div>
<div class="line">        mondrian.initialize(originalDataset, columnInformation, privacyConstraints, <span class="keyword">null</span>);</div>
<div class="line"> </div>
<div class="line">        IPVDataset anonymizedDataset = mondrian.apply();</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">return</span> anonymizedDataset;</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6 </li>
  </ul>
</div>
</body>
</html>
